<tbody>
    <?php foreach ($this->waiting  as $p) { ?>
        <tr>
            <td><a href="/approve/index/id/<?= $p['quote_id'] ?>"><?= $p['quote_id'] ?></a></td>
            <td><?= $p['project_name'] ?></td>
            <td><?= $p['sale_name'] ?></td>
            <td><?= $p['customer'] ?></td>
            <td><?= $p['arch_name'] ?></td>
            <td><?= $p['quote_segment'] ?></td>
            <td><?= $p['quote_date']->format('Y-m-d') ?></td>
            <td>
                <span>
                    <?php 
                    if ($p['ship_required_date'] != null && $p['ship_required_date']->format('Y-m-d') > '2000-01-01') {
                        echo $p['ship_required_date']->format('Y-m-d');
                    } ?></span></td>
            <td><?= $p['status_name'] ?></td>
        </tr>
    <?php } ?>
</tbody>


<tbody>
                        <?php foreach ($this->approved as $p) { ?>
                            <tr>
                                <td><a target='_blank' href="/approve/index/id/<?= $p['quote_id'] ?>"><img src="/images/icons/dark/pencil.png" alt="edit" style="margin:0px 4px"></a></td>
                                <td><a target='_blank' href="/approve/index/id/<?= $p['quote_id'] ?>"><?= $p['quote_id'] ?></a></td>
                                <td><?= $p['project_name'] ?></td>
                                <td><?= $p['sale_name'] ?></td>
                                <td><?= $p['customer'] ?></td>
                                <td><?= $p['arch_name'] ?></td>
                                <td><?= $p['quote_segment'] ?></td>
                                <td><?= $p['quote_date']->format('Y-m-d') ?></td>
                                <td><span class='<?php if ($p['expire_date']->format('Ymd') <= date('Ymd')) echo 'red'; ?>'><?= $p['expire_date']->format('Y-m-d') ?></span></td>
                                <td><span><?php if ($p['ship_required_date'] != null && $p['ship_required_date']->format('Y-m-d') > '2000-01-01') {
                                                echo $p['ship_required_date']->format('Y-m-d');
                                            } ?></span></td>
                                <td><?= $p['status_name'] ?></td>
                            </tr>
                        <?php } ?>
                    </tbody>


                    <tbody>
                    <?php foreach ($this->disapproved as $p) { ?>
                        <tr>
                            <td><a target='_blank' href="/approve/index/id/<?= $p['quote_id'] ?>"><img src="/images/icons/dark/pencil.png" alt="edit" style="margin:0px 4px"></a></td>
                            <td><a target='_blank' href="/quote/edit/id/<?= $p['quote_id'] ?>"><?= $p['quote_id'] ?></a></td>
                            <td><?= $p['project_name'] ?></td>
                            <td><?= $p['sale_name'] ?></td>
                            <td><?= $p['customer'] ?></td>
                            <td><?= $p['arch_name'] ?></td>
                            <td><?= $p['quote_segment'] ?></td>
                            <td><?= $p['quote_date']->format('Y-m-d') ?></td>
                            <td><span class='<?php if ($p['expire_date']->format('Ymd') <= date('Ymd')) echo 'red'; ?>'><?= $p['expire_date']->format('Y-m-d') ?></span></td>
                            <td><span><?php if ($p['ship_required_date'] != null && $p['ship_required_date']->format('Y-m-d') > '2000-01-01') {
                                            echo $p['ship_required_date']->format('Y-m-d');
                                        } ?></span></td>
                            <td><?= $p['status_name'] ?></td>
                        </tr>
                    <?php } ?>
                </tbody>


                ajax: {
            url: "/index/approvalwaiting",
            dataSrc: ''
        },
        columns: [
            { data: "quote_id", createdCell: function(cell, cellData, rowData, rowIndex, colIndex) {
                $(cell).html("<a target='_blank' href='/approve/index/id/"+rowData.quote_id+"'>"+rowData.quote_id+"</a>");
            }},
            { data: "project_name"},
            { data: "sale_name"},
            { data: "customer"},
            { data: "arch_name"},
            { data: "quote_segment"},
            { data: "quote_date.date"},
            { data: "ship_required_date.date"},
            { data: "status_name"}
        ],
        columnDefs: [{
            targets: [5, 6],
            render: function (data) {
                let DateTime = luxon.DateTime;
                let d = DateTime.fromSQL(data).setLocale('en').toFormat('D');
                return d;
            }}
        ],
        processing: true,
        order: [[0, "desc"]],
        fixedColumns: { start: 1, end: 1},
        scrollX: true